<!DOCTYPE html>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml">

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Controle de Viagens</title>
	<script src="scripts/jquery-1.11.2.js"></script>
	<link href="css/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
	<link rel="stylesheet" href="dist/css/bootstrap-select.css">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
	<script src="dist/js/bootstrap-select.js"></script>
	<script src="js/jquery.maskedinput.js" type="text/javascript"></script>
	<script src="js/jquery.maskMoney.js" type="text/javascript"></script>
	
	<link rel="stylesheet" type="text/css" href="css/jquery.dataTables.min.css">  
	<script type="text/javascript" src="js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/plug-ins/1.10.12/sorting/date-uk.js"></script>
  </head>
  
  <style type="text/css">
	.numero_entradas{
		margin-top:15px;
		margin-bottom:-15px;
	}
	.paginacao{
		margin-bottom:-15px;
	}
	table.dataTable td {
		padding: 100px;
	}
	
  </style>
  
  <script type="text/javascript">
		$(document).ready( function () {
			$('#tablesorter-imasters').DataTable({
				"oLanguage": {
					"sInfo": "Mostrando _START_ a _END_ de _TOTAL_ regisros",
					"sLengthMenu": "Mostrar _MENU_ registros"
				},
				"dom": 't<"numero_entradas"l><"paginacao"p><"paginacao"i><"clear">',
				searching: false,				
				"lengthMenu": [[50, 25, 100, 200, -1], [50, 25, 100, 200, "Todos"]],
				"order": [[ 0, "desc" ]],
				columnDefs: [{ type: 'date-uk', targets: [1,2] }]
			});
		} );
	</script>
  
	
  <body>
	[HEADER]
	<div style="font-size:12px;margin: auto;width:90%;align:center;">
		<div style="margin-bottom:-10px;">
			<h1>Consulta Detalhes</h1>
		</div>
		
		<hr>
		<form method="post" action="showAll.php">
			<table id="tablesorter-imasters" class="display" style="position: relative;display: block;margin: 10px auto;padding: 0;width: 100%;height: auto;border-collapse: collapse;text-align: center;">	
				<thead>
					<tr>
					<th colspan="1" style="text-align: left;"><input type = "text" value="[ID]" id = "id" name = "id" placeholder="*" style="width:100%;"></th>
					<th colspan="1" style="text-align: left;"><input type = "text" value="[DI]" id = "di" name = "di" placeholder="*" style="width:100%;"></th> 
					<th colspan="1" style="text-align: left;"><input type = "text" value="[DF]" id = "df" name = "df" placeholder="*" style="width:100%;">
						<script>
							jQuery(function($){
								 $("#di").mask("99/99/9999");
								 $("#df").mask("99/99/9999");
							});
						</script>
					</th>
					<th colspan="1" style="text-align: left;"><input type = "text" value="[NF]" id = "nf" name = "nf" placeholder="*" style="width:100%;"></th>
					<th colspan="1" style="text-align: left;"><input type = "text" value="[FORNECEDOR]" id = "fornecedor" name = "fornecedor" placeholder="*" style="width:100%;"></th>
					<th colspan="1" style="text-align: left;"><input type = "text" value="[TOTAL_NF]" id = "total_nf" name = "total_nf" placeholder="*" style="width:100%;"></th>
					<th colspan="1" style="text-align: left;"><input type = "text" value="[USER]" id = "user" name = "user" placeholder="*" style="width:100%;"></th>				
					<th colspan="1" style="text-align: left;"><input type = "text" value="[CAT]" id = "cat" name = "cat" placeholder="*" style="width:100%;"></th>
					<th colspan="1" style="text-align: left;"><input type = "text" value="[VALUE]" id = "value" name = "value" placeholder="*" style="width:100%;"></th>
					<th colspan="1" style="text-align: left;"><input type = "text" value="[REEMBOLSO]" id = "reembolso" name = "reembolso" placeholder="*" style="width:100%;"></th>
					<th colspan="1" style="text-align: left;">				
						<input type = "text" value="[OBS]" id = "obs" name = "obs" placeholder="*" style="width:100%;">
						<button type = "submit" name="consultar" id = "consultar" style="margin-bottom:5px;display:none;">Ok</button>
					</th>
					<th colspan="1" style="text-align:right;width:8%;">
						<a href='' onClick="javascript:location.reload();return false;" style="text-decoration:none;margin-bottom:5px;">
							<img src="img/refresh.png" style="margin-right:8px;width:23px;margin-bottom:8px;">
						</a>
						<a href='#modalDetalhes' data-toggle='modal' data-target='#modalDetalhes' onClick="setModalValue(-1,1)" style="text-decoration:none;margin-bottom:5px;">
							<img src="img/add.png" style="width:17px;margin-bottom:7px;">
						</a>
					</th>
				  </tr>
				  
				  <tr style="background-color:#008000;color:white;margin-top:10px;">
					<th style="text-align: center;width:11%;">ID</th>
					<th style="text-align: center;width:11%;">D. Inicial</th> 
					<th style="text-align: center;width:11%;">D. Final</th>
					<th style="text-align: center;width:10%;">NF</th>
					<th style="text-align: center;width:5%;">Fornecedor</th>
					<th style="text-align: center;width:5%;">Total NF</th>
					<th style="text-align: center;width:22%;">Usuários</th>				
					<th style="text-align: center;width:5%;">Categoria</th>
					<th style="text-align: center;width:5%;">Valor</th>
					<th style="text-align: center;width:5%;">Reemb.</th>
					<th style="text-align: center;width:5%;">Observações</th>			
					<th style="text-align: center;width:5%;">Ação</th>			
				  </tr>			  
			  </thead>
			  
			  <tbody>
			  [CONTENT]
			  </tbody>
			</table>
		</form>
		<hr>		
		<table align='right' style="margin-bottom:25px;">
		  <tr>			  				
		    [TOTAL_PARCIAL]
			[TOTAL]
		  </tr>	
		  <tr>			  				
		  </tr>	
		</table>
		
		<table align='right' style="float:left;margin-bottom:25px;">
		  <tr>			  				
		    [TOTAL_NOTA]
		  </tr>	
		  <tr>			  				
		  </tr>	
		</table>
	</div>
	
	<!--modal-->	
	<div class="modal fade" id="modalDetalhes" role="dialog">
		<div class="modal-dialog modal-lg">
		  <div class="modal-content">
			<div class="modal-header">
				  <button type="button" class="close" data-dismiss="modal">&times;</button>
				  <h4 class="modal-title">Detalhes</h4>
			</div>
			<iframe name="iframe2" id="iframe2" frameborder="0" scrolling="yes" style="height:500px;width:95%;margin-left:25px;margin-top:15px;"></iframe>
		  </div>
		</div>
	</div>
	<!--fim modal-->
	
    
    <script src="js/bootstrap.js"></script>
	<script type="text/javascript">
		function confirmar() {
			if (confirm("Deseja realmente excluir o detalhe selecionado?") == true) {
				return true;
			} else {
				return false;
			}
		}
		
		function setModalValue (id, action){
			if(action == 0){				
				if(confirmar())
					document.getElementById("iframe2").src = "mdetalhes.php?id="+id+"&action=0";
				else
					 location.reload();
			}else if(action == 2){
				document.getElementById("iframe2").src = "showDetail.php?id="+id;
			}else
				document.getElementById("iframe2").src = "mdetalhes.php?id="+id;
		}
	</script>
  </body>

</html>